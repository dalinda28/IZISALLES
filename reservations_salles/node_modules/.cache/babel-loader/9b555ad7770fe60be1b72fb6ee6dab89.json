{"remainingRequest":"/Users/home/Documents/GitHub/room_reservation/reservations_salles/node_modules/babel-loader/lib/index.js!/Users/home/Documents/GitHub/room_reservation/reservations_salles/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/home/Documents/GitHub/room_reservation/reservations_salles/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/home/Documents/GitHub/room_reservation/reservations_salles/src/views/Connexion.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/home/Documents/GitHub/room_reservation/reservations_salles/src/views/Connexion.vue","mtime":1644420517286},{"path":"/Users/home/Documents/GitHub/room_reservation/reservations_salles/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/home/Documents/GitHub/room_reservation/reservations_salles/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/home/Documents/GitHub/room_reservation/reservations_salles/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/home/Documents/GitHub/room_reservation/reservations_salles/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIExlcyBkb25uw6llcyBzYWlzaWUgcGFyIGwndXRpbGlzYXRldXIKICAgICAgbWFpbDogJycsCiAgICAgIG1kcDogJycsCiAgICAgIC8vIFBvcHVwIAogICAgICBlcnJvcjogJycsCiAgICAgIGFsZXJ0OiAnJwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLm1haWwgIT0gJycgJiYgdGhpcy5tZHAgIT0gJycpIHsKICAgICAgICB0aGlzLmF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDo4ODg4L3Jlc2VydmF0aW9uc19zYWxsZXMvc3JjL2FwaS9jb250cm9sbGVycy9Vc2Vyc1Jlc291cmNlLnBocCIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLmRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgLy8gVsOpcmlmaWNhdGlvbiBkdSBtb3QgZGUgcGFzc2UgKGTDqWNyeXB0YWdlKSBldCBhZHJlc3NlIG1haWwgCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwICYmIF90aGlzLm1haWwgPT0gcmVzcG9uc2UuZGF0YVtpXS5tYWlsICYmIGJjcnlwdC5jb21wYXJlU3luYyhfdGhpcy5tZHAsIHJlc3BvbnNlLmRhdGFbaV0ubWRwKSkgewogICAgICAgICAgICAgIC8vIEVucmVnaXN0cmVtZW50IGRlcyBkb25uw6llcyBkZSBzZXNzaW9uICAgIAogICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoInNldElkIiwgcmVzcG9uc2UuZGF0YVtpXS5pZCk7CgogICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoInNldEZpcnN0TmFtZSIsIHJlc3BvbnNlLmRhdGFbaV0ucHJlbm9tKTsKCiAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgic2V0TGFzdE5hbWUiLCByZXNwb25zZS5kYXRhW2ldLm5vbSk7CgogICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoInNldFByb2ZpbGUiLCByZXNwb25zZS5kYXRhW2ldLnByb2ZpbCk7CgogICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoInNldE1haWwiLCByZXNwb25zZS5kYXRhW2ldLm1haWwpOwoKICAgICAgICAgICAgICBpZiAoX3RoaXMuJHN0b3JlLnN0YXRlLnByb2ZpbGUgPT09ICJlbnNlaWduYW50IikgewogICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvJyk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpcy4kc3RvcmUuc3RhdGUucHJvZmlsZSA9PT0gImFkbWluaXN0cmF0ZXVyIikgewogICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvYWRtaW4tcmVzZXJ2YXRpb25zJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMuYWxlcnQgPSAiTCdhZHJlc3NlIG1haWwgb3UgbGUgbW90IGRlIHBhc3NlIG5lIHNvbnQgcGFzIHZhbGlkZXMiOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZXJyb3IgPSAnVmV1aWxsZXogc2Fpc2lyIHZvdHJlIG1haWwgZXQgbW90IGRlIHBhc3NlLic7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/home/Documents/GitHub/room_reservation/reservations_salles/src/views/Connexion.vue"],"names":[],"mappings":"AA4CA,IAAM,MAAK,GAAI,OAAO,CAAC,UAAD,CAAtB;;AAEA,eAAe;AACX,EAAA,IADW,kBACL;AACF,WAAO;AACH;AACA,MAAA,IAAI,EAAE,EAFH;AAGH,MAAA,GAAG,EAAE,EAHF;AAKH;AACA,MAAA,KAAK,EAAE,EANJ;AAOH,MAAA,KAAK,EAAE;AAPJ,KAAP;AASH,GAXU;AAYX,EAAA,OAAO,EAAC;AACJ,IAAA,KADI,mBACG;AAAA;;AACH,UAAI,KAAK,IAAL,IAAa,EAAb,IAAmB,KAAK,GAAL,IAAY,EAAnC,EAAuC;AACnC,aAAK,KAAL,CAAW,GAAX,CAAe,iFAAf,EACK,IADL,CACU,UAAC,QAAD,EAAc;AAChB,eAAK,IAAI,CAAA,GAAI,CAAb,EAAgB,CAAA,GAAI,QAAQ,CAAC,IAAT,CAAc,MAAlC,EAA0C,CAAC,EAA3C,EAA+C;AACvC;AACJ,gBAAI,QAAQ,CAAC,MAAT,IAAmB,GAAnB,IAA0B,KAAI,CAAC,IAAL,IAAa,QAAQ,CAAC,IAAT,CAAc,CAAd,EAAiB,IAAxD,IAAgE,MAAM,CAAC,WAAP,CAAmB,KAAI,CAAC,GAAxB,EAA6B,QAAQ,CAAC,IAAT,CAAc,CAAd,EAAiB,GAA9C,CAApE,EAAuH;AACnH;AACA,cAAA,KAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,OAAnB,EAA4B,QAAQ,CAAC,IAAT,CAAc,CAAd,EAAiB,EAA7C;;AACA,cAAA,KAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,cAAnB,EAAmC,QAAQ,CAAC,IAAT,CAAc,CAAd,EAAiB,MAApD;;AACA,cAAA,KAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,aAAnB,EAAkC,QAAQ,CAAC,IAAT,CAAc,CAAd,EAAiB,GAAnD;;AACA,cAAA,KAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,YAAnB,EAAiC,QAAQ,CAAC,IAAT,CAAc,CAAd,EAAiB,MAAlD;;AACA,cAAA,KAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB,SAAnB,EAA8B,QAAQ,CAAC,IAAT,CAAc,CAAd,EAAiB,IAA/C;;AACA,kBAAI,KAAI,CAAC,MAAL,CAAY,KAAZ,CAAkB,OAAlB,KAA8B,YAAlC,EAAgD;AAC5C,gBAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,GAAlB;AACJ,eAFA,MAGK,IAAI,KAAI,CAAC,MAAL,CAAY,KAAZ,CAAkB,OAAlB,KAA8B,gBAAlC,EAAoD;AACrD,gBAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,qBAAlB;AACJ;AACJ;AACJ;;AACA,UAAA,KAAI,CAAC,KAAL,GAAa,uDAAb;AAEH,SArBL,EAsBK,KAtBL,CAsBW,UAAC,KAAD,EAAW;AACd,UAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACH,SAxBL;AAyBJ,OA1BA,MA0BM;AACF,aAAK,KAAL,GAAa,6CAAb;AACJ;AACH;AA/BG;AAZG,CAAf","sourcesContent":["<template>\n    <div class=\"container\">\n        <section class=\"form my-5 mx-5 mt-5\">\n            <div class=\"row no-gutters\">\n                <div class=\"col-lg-5\">\n                    <img src=\"../assets/room2.jpg\" class=\"img-fluid\" alt=\"salle de réunion\">\n                </div>\n                <div class=\"col-lg-7 p-5\">\n                    <img src=\"../assets/logo.png\" class=\"logo\" alt=\"salle de réunion\">\n                    <div>\n                        <div class=\"form-row\">\n                            <p class=\"alert alert-danger\" v-if=\"error\">{{ error }}</p>\n                            <p class=\"alert alert-danger\" v-if=\"alert\">{{ alert }}</p>\n                            <div class=\"col-lg-7\">\n                                <input @keyup.enter=\"login()\" type=\"mail\" placeholder=\"test@gmail.fr\" v-model=\"mail\" class=\"form-control my-3 p-4\">\n                            </div>\n                        </div>\n                        <div class=\"form-row\">\n                            <div class=\"col-lg-7\">\n                                <input @keyup.enter=\"login()\" type=\"password\" placeholder=\"*********\" v-model=\"mdp\" class=\"form-control my-3 p-4\">\n                            </div>\n                        </div>\n                        <div class=\"form-row\">\n                            <div class=\"col-lg-7\">\n                                <button type=\"button\" class=\"btn1 mt-3 mb-5\" @click=\"login()\">Se connecter</button>\n                            </div>\n                        </div>\n                        <p>Vous n'avez pas encore de compte ?\n                        <router-link :to=\"{name:'inscription'}\" class=\"nav-link\" href=\"/inscription\">Créer un compte</router-link></p>\n                        <main class=\"App__main\">\n                            <transition\n                                name=\"fade\"\n                                mode=\"out-in\">\n                                <router-view/>\n                            </transition>\n                        </main>\n                    </div>\n                </div>\n            </div>\n        </section>\n    </div>\n</template>\n\n<script>\nconst bcrypt = require('bcryptjs');\n\nexport default {\n    data(){\n        return {\n            // Les données saisie par l'utilisateur\n            mail: '',\n            mdp: '',\n\n            // Popup \n            error: '',\n            alert: ''\n        }\n    },\n    methods:{\n        login(){\n            if (this.mail != '' && this.mdp != '') {\n                this.axios.get(\"http://localhost:8888/reservations_salles/src/api/controllers/UsersResource.php\")\n                    .then((response) => {\n                        for (let i = 0; i < response.data.length; i++) {\n                                // Vérification du mot de passe (décryptage) et adresse mail \n                            if (response.status == 200 && this.mail == response.data[i].mail && bcrypt.compareSync(this.mdp, response.data[i].mdp)){\n                                // Enregistrement des données de session    \n                                this.$store.commit(\"setId\", response.data[i].id);\n                                this.$store.commit(\"setFirstName\", response.data[i].prenom);    \n                                this.$store.commit(\"setLastName\", response.data[i].nom);    \n                                this.$store.commit(\"setProfile\", response.data[i].profil);  \n                                this.$store.commit(\"setMail\", response.data[i].mail);\n                                if (this.$store.state.profile === \"enseignant\") {\n                                    this.$router.push('/');\n                                }\n                                else if (this.$store.state.profile === \"administrateur\") {\n                                    this.$router.push('/admin-reservations');\n                                }\n                            }\n                        }\n                        this.alert = \"L'adresse mail ou le mot de passe ne sont pas valides\"\n\n                    })\n                    .catch((error) => { \n                        console.log(error);\n                    });                        \n            } else{\n                this.error = 'Veuillez saisir votre mail et mot de passe.';\n            }\n        },       \n    }\n}\n</script>\n\n<style scoped>\n*{\n    padding: 0;\n    margin: 0;\n    box-sizing: border-box;\n}\nbody{\n    padding-top: 5%;\n    background: rgb(216,216,216);\n}\n.container{\n    margin-top: 6%;\n}\n.row{\n    background: white;\n    border-radius: 30px;\n    box-shadow: 12px 12px 22px grey;\n}\n.imgroom{\n    border-top-left-radius: 30px;\n    border-bottom-left-radius: 30px;\n}\n.btn1{\n    border: none;\n    outline:  none;\n    height: 50px;\n    width: 100%;\n    background-color: black;\n    color: white;\n    border-radius: 4px;\n    font-weight: bold;\n}\n.btn1:hover{\n    background-color: white;\n    border: 1px solid;\n    color: black; \n}\n.fade-enter-active,\n.fade-leave-active {\n  transition-duration: 0.3s;\n  transition-property: opacity;\n  transition-timing-function: ease;\n}\n\n.fade-enter,\n.fade-leave-active {\n  opacity: 0\n}\n.logo{\n    width: 150px;\n}\n</style>\n"],"sourceRoot":""}]}